<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cosentus Voice Agent - Example</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      font-size: 32px;
      margin-bottom: 10px;
      color: #333;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }

    .agent-card {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .agent-card h2 {
      font-size: 20px;
      margin-bottom: 8px;
      color: #333;
    }

    .agent-card p {
      color: #666;
      margin-bottom: 15px;
      font-size: 14px;
    }

    .button-group {
      display: flex;
      gap: 10px;
    }

    button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-primary {
      background: #01B2D6;
      color: white;
    }

    .btn-primary:hover:not(:disabled) {
      background: #0195b3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(1, 178, 214, 0.4);
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-danger:hover:not(:disabled) {
      background: #c82333;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
    }

    .status {
      background: #e9ecef;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      font-size: 14px;
    }

    .status-label {
      font-weight: 600;
      color: #495057;
      margin-bottom: 5px;
    }

    .status-text {
      color: #6c757d;
    }

    .status-text.connected {
      color: #28a745;
      font-weight: 600;
    }

    .status-text.error {
      color: #dc3545;
      font-weight: 600;
    }

    .status-text.speaking {
      color: #01B2D6;
      font-weight: 600;
    }

    .indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 8px;
      background: #6c757d;
    }

    .indicator.connected {
      background: #28a745;
      animation: pulse 2s infinite;
    }

    .indicator.speaking {
      background: #01B2D6;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .footer {
      text-align: center;
      margin-top: 30px;
      color: #6c757d;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéôÔ∏è Cosentus Voice Agents</h1>
    <p class="subtitle">Talk to our AI agents using natural voice</p>

    <!-- Chloe Agent -->
    <div class="agent-card">
      <h2>Chloe - Customer Service</h2>
      <p>General customer service agent ready to assist with any questions.</p>
      <div class="button-group">
        <button id="chloe-connect" class="btn-primary">Talk to Chloe</button>
        <button id="chloe-disconnect" class="btn-danger" disabled>End Call</button>
      </div>
    </div>

    <!-- Cindy Agent -->
    <div class="agent-card">
      <h2>Cindy - Payment Specialist</h2>
      <p>Handles outstanding balances and payment processing in 50+ languages.</p>
      <div class="button-group">
        <button id="cindy-connect" class="btn-primary">Talk to Cindy</button>
        <button id="cindy-disconnect" class="btn-danger" disabled>End Call</button>
      </div>
    </div>

    <!-- Status Display -->
    <div class="status">
      <div class="status-label">Status</div>
      <div id="status" class="status-text">
        <span class="indicator"></span>Ready
      </div>
    </div>

    <div class="footer">
      Powered by Cosentus AI & Retell
    </div>
  </div>

  <!-- Required Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/retell-client-js-sdk@latest/dist/web/index.js"></script>
  <script src="./cosentus-voice.js"></script>

  <script>
    // Create agent instances
    const chloe = CosentusVoice.createAgent('chloe');
    const cindy = CosentusVoice.createAgent('cindy');

    // Get DOM elements
    const chloeConnectBtn = document.getElementById('chloe-connect');
    const chloeDisconnectBtn = document.getElementById('chloe-disconnect');
    const cindyConnectBtn = document.getElementById('cindy-connect');
    const cindyDisconnectBtn = document.getElementById('cindy-disconnect');
    const statusEl = document.getElementById('status');

    // Helper function to update status
    function updateStatus(text, type = 'default') {
      const indicator = statusEl.querySelector('.indicator');
      statusEl.innerHTML = `<span class="indicator ${type}"></span>${text}`;
      statusEl.className = `status-text ${type}`;
    }

    // Chloe event handlers
    chloeConnectBtn.onclick = async () => {
      try {
        chloeConnectBtn.disabled = true;
        await chloe.connect();
      } catch (error) {
        chloeConnectBtn.disabled = false;
      }
    };

    chloeDisconnectBtn.onclick = () => {
      chloe.disconnect();
    };

    chloe.on('connecting', () => {
      updateStatus('Connecting to Chloe...', 'default');
    });

    chloe.on('connected', () => {
      updateStatus('Connected to Chloe', 'connected');
      chloeConnectBtn.disabled = true;
      chloeDisconnectBtn.disabled = false;
      cindyConnectBtn.disabled = true;
    });

    chloe.on('speaking', () => {
      updateStatus('Chloe is speaking...', 'speaking');
    });

    chloe.on('listening', () => {
      updateStatus('Listening...', 'connected');
    });

    chloe.on('disconnected', () => {
      updateStatus('Disconnected', 'default');
      chloeConnectBtn.disabled = false;
      chloeDisconnectBtn.disabled = true;
      cindyConnectBtn.disabled = false;
    });

    chloe.on('error', (error) => {
      updateStatus('Error: ' + error, 'error');
      chloeConnectBtn.disabled = false;
      chloeDisconnectBtn.disabled = true;
      cindyConnectBtn.disabled = false;
    });

    // Cindy event handlers
    cindyConnectBtn.onclick = async () => {
      try {
        cindyConnectBtn.disabled = true;
        await cindy.connect();
      } catch (error) {
        cindyConnectBtn.disabled = false;
      }
    };

    cindyDisconnectBtn.onclick = () => {
      cindy.disconnect();
    };

    cindy.on('connecting', () => {
      updateStatus('Connecting to Cindy...', 'default');
    });

    cindy.on('connected', () => {
      updateStatus('Connected to Cindy', 'connected');
      cindyConnectBtn.disabled = true;
      cindyDisconnectBtn.disabled = false;
      chloeConnectBtn.disabled = true;
    });

    cindy.on('speaking', () => {
      updateStatus('Cindy is speaking...', 'speaking');
    });

    cindy.on('listening', () => {
      updateStatus('Listening...', 'connected');
    });

    cindy.on('disconnected', () => {
      updateStatus('Disconnected', 'default');
      cindyConnectBtn.disabled = false;
      cindyDisconnectBtn.disabled = true;
      chloeConnectBtn.disabled = false;
    });

    cindy.on('error', (error) => {
      updateStatus('Error: ' + error, 'error');
      cindyConnectBtn.disabled = false;
      cindyDisconnectBtn.disabled = true;
      chloeConnectBtn.disabled = false;
    });

    // Log library info
    console.log('Cosentus Voice Library v' + CosentusVoice.version);
    console.log('Available agents:', Object.keys(CosentusVoice.agents));
  </script>
</body>
</html>

